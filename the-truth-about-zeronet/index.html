<!DOCTYPE html>
<html>

<body>

<!-- <textarea id="text-input" rows="3" cols="80"
    oninput="this.editor.update()">Type **Markdown** here.</textarea> -->

<div id="preview">
<!-- placeholder for markdown display -->
</div>

<script src="../libs/jquery.min.js" type="text/javascript"></script>
<script src="../libs/marked.min.js" type="text/javascript"></script>
<script src="../libs/zerolib.js" type="text/javascript"></script>

<script>
/* Querystring stuff. */
function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, '\\$&');
    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
}

/* Initialize ZeroApi. */
const zeroApi = new ZeroApi()

function readFile(file, callback) {
    zeroApi.cmd('fileGet', [file, false], callback)
}

const pageNum = getParameterByName('p')
// console.log('Page #' , pageNum)

const welcome = `
# Welcome to The Truth About Zeronet
### Researched and written by [Ivanq](https://github.com/imachug)

### Chapters

- [Home](?)
- [01 — Zites](?p=1)
- [02 — Security](?p=2)
- [03 — Cloning Zites](?p=3)
- [04 — Creating Static Zite](?p=4)
- [05 — ZeroFrame](?p=5)
- [06 — Databases](?p=6)
- [07 — Changing Tables](?p=7)
- [08 — DbSchema](?p=8)
- [09 — User Content](?p=9)
- [10 — Editing User Data](?p=10)
- [11 — Merger Sites](?p=11)
- [12 — Merged Content](?p=12)
- [13 — Ugly Things](?p=13)

---
`

if (!pageNum) {
    const markdown = marked(welcome)

    /* Update the markup holder. */
    $('#preview').html(markdown)
} else {
    switch(parseInt(pageNum)) {
        case 1:
            pageName = '01-zites.md'
            break
        case 2:
            pageName = '02-security.md'
            break
        case 3:
            pageName = '03-cloning-zites.md'
            break
        case 4:
            pageName = '04-creating-static-zite.md'
            break
        case 5:
            pageName = '05-zeroframe.md'
            break
        case 6:
            pageName = '06-databases.md'
            break
        case 7:
            pageName = '07-changing-tables.md'
            break
        case 8:
            pageName = '08-dbschema.md'
            break
        case 9:
            pageName = '09-user-content.md'
            break
        case 10:
            pageName = '10-editing-user-data.md'
            break
        case 11:
            pageName = '11-merger-sites.md'
            break
        case 12:
            pageName = '12-merged-content.md'
            break
        case 13:
            pageName = '13-ugly-things.md'
            break
        default:
            pageName = '01-zites.md'
            break
    }

    /* Read the source (markdown) file. */
    readFile(`the-truth-about-zeronet/${pageName}`, (content) => {
        if (content) {
            const markdown = marked(welcome + content)

            /* Update the markup holder. */
            $('#preview').html(markdown)
        }
    })
}
</script>

</body>
</html>
